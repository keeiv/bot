# 貢獻指南

感謝您對本專案的興趣！這不僅是一個 Discord 機器人，也是一個由社群共同打造的專案。我們歡迎各種形式的貢獻。

## 核心貢獻哲學

這個專案有一個簡單的想法：**如果你是用戶，也寫程式碼，並且想要某個功能，歡迎直接提交 PR（Pull Request）。**

*   **對於會寫程式碼的用戶**：如果你發現缺少你想要的功能，或是可以改進的地方，鼓勵你直接動手實現並提交 PR。不必總是等待維護者。
*   **對於不會寫程式碼的用戶**：你的想法同樣重要。歡迎到我們的 Discord 社群討論功能需求或回報問題，你的建議可能成為別人 PR 的起點。

## 貢獻流程

### 1. 判斷你的更新規模

為確保專案穩定性與方向，請根據以下定義判斷你的貢獻屬於哪一類，並遵循對應流程。

#### 小型或中型更新
這類變更通常專注於單一功能或局部改進，影響範圍可控。
*   **判斷標準**：
    *   新增一個獨立的指令或功能。
    *   修復一個特定的錯誤（Bug）。
    *   更新文件或註釋。
    *   進行程式碼重構，但不影響現有功能。
    *   新增或修改工具函數，且不影響核心邏輯。
*   **操作流程**：**不需要事先討論**。請直接 Fork 倉庫，建立分支，完成你的更改，並確保通過所有 CI 檢查，然後提交 Pull Request。

#### 大型更新
這類變更可能會影響專案整體架構、多個模組或用戶體驗，需要謹慎規劃。
*   **判斷標準**（符合任一項即屬大型更新）：
    *   **新增依賴**：需要引入新的外部函式庫或服務。
    *   **架構變動**：重構核心類別、資料流或設計模式，影響多個檔案。
    *   **資料庫/結構變更**：需要修改 `config.json`、`data/` 目錄下的檔案格式，或新增資料表。
    *   **破壞性變更**：會修改現有指令的「名稱、參數、輸出格式」或「權限需求」，導致舊版用戶無法使用。
    *   **新增需管理員權限的功能**：任何需要伺服器管理員授權才能設定的指令。
    *   **大規模程式碼變動**：單次 PR 更動超過 500 行，或修改超過 10 個檔案。
*   **操作流程**：**必須先開 Issue 討論**。
    1.  開啟一個新的 Issue，清楚描述你計畫的「功能、變更內容、實作方法」以及「為什麼這是必要的」。
    2.  等待維護者或社群回饋，確認方向可行。
    3.  方向確認後，再開始進行開發並提交 PR，並在 PR 描述中「連結該 Issue」。

### 2. 開發環境設置

請參考 `README.md` 的「安裝」章節設置本地環境。

### 3. 程式碼風格與品質

提交的程式碼需遵循以下規範以確保一致性：
*   **基本要求**：遵循 PEP 8 規範，並為複雜邏輯添加適當的註釋或文件字串（Docstring）。
*   **格式化工具**：我們使用 **Black** 與 **isort** 自動格式化程式碼。提交前請執行：
    ```bash
    black src/ tests/
    isort src/ tests/
    ```
*   **風格檢查**：確保程式碼能通過 **flake8** 檢查：
    ```bash
    flake8 src/ tests/
    ```
*   **測試**：鼓勵為新功能或錯誤修復編寫測試。所有現有測試必須通過：
    ```bash
    pytest -v
    ```
*   **語言政策**：我們理解開發者習慣。函式與變數名稱「強烈鼓勵」使用英文，但非強制。註釋、文件字串和用戶介面文字可以使用中文。

### 4. 提交 Pull Request (PR)

*   **PR 標題**：請使用 Conventional Commits 規範的前綴，例如：
    *   `feat:` 新功能
    *   `fix:` 錯誤修復
    *   `docs:` 文件更新
    *   `style:` 程式碼格式調整
    *   `refactor:` 重構
    *   `test:` 測試相關
*   **PR 描述**：請清楚說明：
    1.  變更的內容與目的。
    2.  如何測試你的變更。
    3.  如果這是一個大型更新，請連結對應的 Issue 編號（例如 `Closes #123`）。

## 取得協助

*   查看現有 Issues 或開啟新的 Issue。
*   加入我們的 Discord 社群進行討論。

## 授權條款

透過提交貢獻，你同意你的貢獻將在與本專案相同的授權條款（MIT License）下發布。

感謝你考慮為 `keeiv/bot` 做出貢獻！你的參與讓這個專案變得更好。
**「ギルド群を強く豊かに！」